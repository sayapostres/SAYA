<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Meta tags SEO optimizadas -->
    <title>SAYA Pasteles • Edición San Valentín 2026 | Mini Pastelitos y Cupcakes Premium CDMX</title>
    <meta name="description" content="✨ Edición EXCLUSIVA San Valentín 2026 • Mini pastelitos y cupcakes premium personalizados • Entrega en CDMX • Etiquetas con mensaje romántico • ¡Pide ya!">
    <meta name="keywords" content="pasteles San Valentín, cupcakes CDMX, postres románticos, mini pastelitos, regalo original, dulces personalizados, cheesecake tortuga, tarta manzana canela">
    <meta name="author" content="SAYA Pasteles">
    <meta name="robots" content="index, follow">
    <!-- Después de la meta viewport existente -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="format-detection" content="telephone=no">
    <!-- Open Graph optimizado -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sayapasteles.com/">
    <meta property="og:title" content="SAYA Pasteles • Edición San Valentín 2026 | Postres Premium CDMX">
    <meta property="og:description" content="Postres premium para San Valentín • Personalización completa • Entrega en CDMX • ¡Haz tu pedido ahora!">
    <meta property="og:image" content="https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_A.jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="SAYA Pasteles • Edición San Valentín 2026">
    <meta name="twitter:description" content="Postres premium para celebrar el amor • Personalización completa • CDMX">
    
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Bakery",
        "name": "SAYA Pasteles",
        "image": "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_logo.jpeg",
        "description": "Pastelería artesanal premium especializada en postres románticos y personalizados",
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "Ciudad de México",
            "addressRegion": "CDMX",
            "addressCountry": "MX"
        },
        "telephone": "+525513581184",
        "openingHours": "Mo-Sa 09:00-20:00",
        "priceRange": "$$",
        "url": "https://sayapasteles.com/",
        "servesCuisine": "Postres y pasteles artesanales"
    }
    </script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_logo.jpeg">
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    
    <style>
        :root {
            --lila-oscuro: #6A4C93;
            --lila: #8B5FBF;
            --lila-claro: #B39CD0;
            --lila-suave: #E6E6FA;
            --lila-fondo: #F8F7FF;
            --blanco: #FFFFFF;
            --texto-oscuro: #2D2B3D;
            --texto-claro: #6D6B7D;
            --verde-whatsapp: #25D366;
            --rosa-corazon: #FF6B9D;
            --dorado: #D4AF37;
            --sombra-suave: 0 4px 20px rgba(107, 91, 149, 0.08);
            --sombra-media: 0 8px 32px rgba(107, 91, 149, 0.12);
            --sombra-intensa: 0 12px 48px rgba(107, 91, 149, 0.18);
            --radio-lg: 12px;
            --radio-xl: 16px;
            --radio-full: 50px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
/* Psicología de colores para ventas */
.best-seller-badge {
    background: linear-gradient(45deg, #ff6b6b, #ff8e53);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

/* Urgencia */
.urgency-badge {
    background: #fff3cd;
    color: #856404;
    border-left: 4px solid #ffc107;
    animation: fadeInOut 3s infinite;
}

/* Social proof */
.testimonial {
    background: #f8f9fa;
    border-left: 3px solid var(--lila);
    font-style: italic;
}

/* Precio con descuento visual */
.product-price {
    font-size: 1.8rem;
    color: var(--lila-oscuro);
    position: relative;
}

.product-price::before {
    content: "Valor";
    font-size: 0.7rem;
    color: var(--texto-claro);
    position: absolute;
    top: -15px;
    left: 0;
}
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }
    @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        .product-image {
            cursor: zoom-in;
        }
        
        /* Estilos para swiper */
        .product-swiper {
            position: relative;
            height: 250px;
            overflow: hidden;
        }
        
        .product-swiper .swiper-slide {
            height: 100%;
        }
        
        .product-swiper .swiper-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-swiper .swiper-pagination {
            bottom: 10px !important;
        }
        
        .product-swiper .swiper-pagination-bullet {
            background: rgba(255, 255, 255, 0.5);
            width: 8px;
            height: 8px;
        }
        
        .product-swiper .swiper-pagination-bullet-active {
            background: var(--lila);
        }
        
        .product-swiper .swiper-button-next,
        .product-swiper .swiper-button-prev {
            color: white;
            background: rgba(106, 76, 147, 0.7);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: none;
        }
        
        .product-swiper:hover .swiper-button-next,
        .product-swiper:hover .swiper-button-prev {
            display: flex;
        }
        
        .product-swiper .swiper-button-next:after,
        .product-swiper .swiper-button-prev:after {
            font-size: 12px;
        }
        
        .product-swiper .swiper-button-next {
            right: 10px;
        }
        
        .product-swiper .swiper-button-prev {
            left: 10px;
        }
        
        @media (max-width: 768px) {
            .product-swiper {
                height: auto;
            }
            
            .product-swiper .swiper-button-next,
            .product-swiper .swiper-button-prev {
                display: none !important;
            }
        }
        .btn-primary {
            background: linear-gradient(135deg, var(--lila) 0%, var(--lila-oscuro) 100%);
            border: none;
            border-radius: var(--radio-full);
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            color: white;
            transition: var(--transition);
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--lila-fondo);
            color: var(--texto-oscuro);
            line-height: 1.6;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: var(--lila-oscuro);
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-align: center;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, var(--lila), var(--rosa-corazon));
        }

        .section-subtitle {
            text-align: center;
            color: var(--texto-claro);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 3rem;
        }

        /* Navegación mejorada */
        .navbar-custom {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(139, 95, 191, 0.1);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: var(--transition);
            box-shadow: var(--sombra-suave);
        }

        .nav-logo {
            height: 50px;
            width: auto;
            transition: var(--transition);
        }

        .nav-logo:hover {
            transform: scale(1.05);
        }

        .nav-link-custom {
            color: var(--lila-oscuro) !important;
            font-weight: 500;
            margin: 0 0.5rem;
            padding: 0.5rem 1rem !important;
            border-radius: var(--radio-full);
            transition: var(--transition);
            position: relative;
        }

        .nav-link-custom::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--lila);
            transition: var(--transition);
            transform: translateX(-50%);
        }

        .nav-link-custom:hover::after,
        .nav-link-custom.active::after {
            width: 80%;
        }

        .nav-link-custom.active {
            color: var(--lila) !important;
        }

        .nav-cta {
            background: linear-gradient(135deg, var(--lila) 0%, var(--lila-oscuro) 100%);
            color: white !important;
            padding: 0.8rem 1.5rem !important;
            border-radius: var(--radio-full);
            font-weight: 600;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .nav-cta:hover {
            transform: translateY(-3px);
            box-shadow: var(--sombra-media);
            border-color: var(--blanco);
        }

        /* Hero section mejorada */
        .hero-section {
            padding: 180px 0 100px;
            background: linear-gradient(135deg, var(--lila-fondo) 0%, var(--lila-suave) 100%);
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_A.jpeg') center/cover;
            opacity: 0.1;
            filter: blur(2px);
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .hero-logo {
            width: 120px;
            height: 120px;
            margin: 0 auto 2rem;
            border-radius: 50%;
            overflow: hidden;
            background: white;
            padding: 15px;
            box-shadow: var(--sombra-intensa);
            border: 3px solid var(--lila);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .hero-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
        }

        .hero-title {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--lila-oscuro) 0%, var(--rosa-corazon) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(106, 76, 147, 0.1);
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: var(--texto-claro);
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 400;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.8rem;
            padding: 1rem 2rem;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--lila);
            border-radius: var(--radio-full);
            font-size: 1rem;
            font-weight: 600;
            color: var(--lila-oscuro);
            backdrop-filter: blur(10px);
            box-shadow: var(--sombra-suave);
            margin-bottom: 3rem;
            transition: var(--transition);
        }

        .hero-badge:hover {
            transform: translateY(-3px);
            box-shadow: var(--sombra-media);
        }

        /* Contador de tiempo limitado */
        .countdown-container {
            background: white;
            border-radius: var(--radio-xl);
            padding: 2rem;
            box-shadow: var(--sombra-media);
            margin: 2rem auto;
            max-width: 500px;
            border: 2px solid var(--lila-suave);
        }

        .countdown-title {
            font-size: 1.1rem;
            color: var(--lila-oscuro);
            margin-bottom: 1rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .countdown-unit {
            text-align: center;
            flex: 1;
        }

        .countdown-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--lila);
            background: var(--lila-fondo);
            width: 60px;
            height: 60px;
            border-radius: var(--radio-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 0.5rem;
            border: 2px solid var(--lila-claro);
        }

        .countdown-label {
            font-size: 0.8rem;
            color: var(--texto-claro);
            text-transform: uppercase;
            font-weight: 500;
        }

        /* Sección Más Vendidos */
        .best-sellers-section {
            padding: 6rem 0;
            background: linear-gradient(135deg, #f9f7ff 0%, #f0edf5 100%);
            position: relative;
        }

        .best-seller-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: linear-gradient(135deg, var(--rosa-corazon) 0%, #ff4081 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--radio-full);
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
            box-shadow: 0 4px 12px rgba(255, 107, 157, 0.3);
        }

        .limited-badge {
            background: linear-gradient(135deg, var(--dorado) 0%, #c19b3c 100%);
        }

        /* Productos mejorados */
        .products-section {
            padding: 6rem 0;
            background: white;
        }

        .product-card {
            background: var(--lila-fondo);
            border-radius: var(--radio-xl);
            padding: 0;
            height: 100%;
            transition: var(--transition);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            box-shadow: var(--sombra-suave);
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--sombra-intensa);
            border-color: var(--lila);
        }

        .product-image-container {
            position: relative;
            overflow: hidden;
            height: 250px;
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            cursor: pointer;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        .product-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(106, 76, 147, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: var(--transition);
        }

        .product-card:hover .product-overlay {
            opacity: 1;
        }

        .product-content {
            padding: 1.5rem;
        }

        .product-title {
            font-size: 1.5rem;
            color: var(--lila-oscuro);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .product-desc {
            color: var(--texto-claro);
            font-size: 0.95rem;
            margin-bottom: 1rem;
        }

        .product-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--lila);
            margin-bottom: 0;
        }

        .product-price small {
            font-size: 1rem;
            color: var(--texto-claro);
            font-weight: 400;
        }

        /* Botón de pedido flotante móvil */
        .mobile-order-btn {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            left: 1rem;
            background: linear-gradient(135deg, var(--lila) 0%, var(--lila-oscuro) 100%);
            color: white;
            border: none;
            border-radius: var(--radio-full);
            padding: 1rem;
            font-size: 1.1rem;
            font-weight: 600;
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            box-shadow: var(--sombra-intensa);
            transition: var(--transition);
            text-decoration: none;
        }

        .mobile-order-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(139, 95, 191, 0.3);
            color: white;
        }

        /* WIZARD REDISEÑADO - MÓVIL FIRST */
        .wizard-modal .modal-dialog {
            max-width: 500px;
            margin: 1rem auto;
        }

        .wizard-modal .modal-content {
            border-radius: var(--radio-xl);
            border: none;
            overflow: hidden;
            box-shadow: var(--sombra-intensa);
        }

        .wizard-header {
            background: linear-gradient(135deg, var(--lila) 0%, var(--lila-oscuro) 100%);
            padding: 1.2rem;
            color: white;
            position: relative;
        }

        .wizard-progress-mobile {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 0.8rem;
            position: relative;
        }

        .wizard-progress-mobile::before {
            content: '';
            position: absolute;
            top: 12px;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(255, 255, 255, 0.3);
            z-index: 1;
        }

        .progress-step-mobile {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.2rem;
        }

        .step-circle-mobile {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.8rem;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .progress-step-mobile.active .step-circle-mobile {
            background: white;
            color: var(--lila-oscuro);
            border-color: white;
        }

        .progress-step-mobile.completed .step-circle-mobile {
            background: var(--dorado);
            color: white;
        }

        .step-label-mobile {
            font-size: 0.65rem;
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            max-width: 60px;
            line-height: 1.2;
        }

        .progress-step-mobile.active .step-label-mobile {
            color: white;
            font-weight: 600;
        }

        .wizard-body-mobile {
            padding: 1.2rem;
            max-height: 60vh;
            overflow-y: auto;
        }

        .wizard-step-mobile {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .wizard-step-mobile.active {
            display: block;
        }

        /* Opciones optimizadas para móvil */
      /* Contenedor que permite múltiples elementos por fila */
.option-grid-mobile {
    display: flex;
    flex-wrap: wrap; /* Esto hace que se acomoden varios uno tras otro */
    gap: 0.4rem; /* Espacio mínimo entre badges */
    justify-content: flex-start;
    margin: 1rem 0;
}

.option-card-mobile {
    flex: 0 1 auto; /* El ancho lo define el texto, no la columna */
    background: white;
    border: 1.5px solid rgba(139, 95, 191, 0.2);
    border-radius: 100px; /* Forma de píldora total */
    padding: 0.3rem 0.8rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap; /* Evita que el texto se parta en dos líneas */
    height: 32px; /* Altura muy reducida para que quepan filas y filas */
}

/* Texto del producto */
.card-title {
    font-size: 0.75rem;
    font-weight: 500;
    color: #444;
}

/* Precio destacado */
.card-price {
    font-size: 0.7rem;
    font-weight: 800;
    color: #8b5fbf;
    background: rgba(139, 95, 191, 0.1);
    padding: 1px 6px;
    border-radius: 10px;
}

/* Estado Seleccionado */
.option-card-mobile.selected {
    background: #8b5fbf;
    border-color: #8b5fbf;
}

.option-card-mobile.selected .card-title,
.option-card-mobile.selected .card-price {
    color: white;
}

.option-card-mobile.selected .card-price {
    background: rgba(255, 255, 255, 0.2);
}

        .option-price-mobile {
            font-size: 0.7rem;
            color: var(--lila);
            font-weight: 600;
            margin-top: 0.3rem;
        }

        .quantity-selector-mobile {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .quantity-btn-mobile {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--lila);
            background: white;
            color: var(--lila);
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .quantity-btn-mobile:hover {
            background: var(--lila);
            color: white;
        }

        .quantity-display-mobile {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--lila-oscuro);
            min-width: 40px;
            text-align: center;
        }

        .form-group-mobile {
            margin-bottom: 1rem;
        }

        .form-label-mobile {
            display: block;
            margin-bottom: 0.3rem;
            font-weight: 600;
            color: var(--lila-oscuro);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-input-mobile {
            width: 100%;
            padding: 0.7rem 1rem;
            border: 2px solid rgba(139, 95, 191, 0.2);
            border-radius: var(--radio-lg);
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            color: var(--texto-oscuro);
            transition: var(--transition);
        }

        .form-input-mobile:focus {
            outline: none;
            border-color: var(--lila);
            box-shadow: 0 0 0 3px rgba(139, 95, 191, 0.1);
        }

        .order-summary-mobile {
            background: var(--lila-fondo);
            border-radius: var(--radio-xl);
            padding: 1rem;
            margin: 1rem 0;
            border: 2px solid var(--lila-suave);
            font-size: 0.85rem;
        }

        .summary-item-mobile {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.6rem;
            padding-bottom: 0.6rem;
            border-bottom: 1px solid rgba(139, 95, 191, 0.1);
        }

        .summary-item-mobile:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .summary-total-mobile {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--lila-oscuro);
            margin-top: 0.8rem;
            padding-top: 0.8rem;
            border-top: 2px solid var(--lila);
        }

        .wizard-footer-mobile {
            display: flex;
            justify-content: space-between;
            padding: 1rem;
            border-top: 1px solid rgba(139, 95, 191, 0.1);
            background: white;
            gap: 0.5rem;
        }

        .btn-primary-mobile {
            background: linear-gradient(135deg, var(--lila) 0%, var(--lila-oscuro) 100%);
            color: white;
            border: none;
            border-radius: var(--radio-lg);
            padding: 0.8rem 1.2rem;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex: 1;
            white-space: nowrap;
        }

        .btn-primary-mobile:hover {
            transform: translateY(-2px);
            box-shadow: var(--sombra-suave);
        }

        .btn-secondary-mobile {
            background: transparent;
            color: var(--lila-oscuro);
            border: 2px solid var(--lila);
            border-radius: var(--radio-lg);
            padding: 0.8rem 1.2rem;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex: 1;
            white-space: nowrap;
        }

        .btn-secondary-mobile:hover {
            background: var(--lila-fondo);
            transform: translateY(-2px);
        }

        /* Lightbox */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-img {
            max-width: 90%;
            max-height: 90%;
            border-radius: var(--radio-xl);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            background: none;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .lightbox-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* WhatsApp flotante mejorado */
        .whatsapp-float {
            position: fixed;
            bottom: 4.5rem;
            right: 1.5rem;
            width: 60px;
            height: 60px;
            background: var(--verde-whatsapp);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
            box-shadow: var(--sombra-intensa);
            z-index: 1000;
            transition: var(--transition);
            text-decoration: none;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            70% { box-shadow: 0 0 0 12px rgba(37, 211, 102, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }

        .whatsapp-float:hover {
            transform: scale(1.1) rotate(5deg);
            animation: none;
        }

        /* Footer mejorado */
        .footer {
            background: linear-gradient(135deg, var(--lila-oscuro) 0%, var(--lila) 100%);
            color: white;
            padding: 5rem 0 2rem;
        }

        .footer-brand {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .footer-logo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: white;
            padding: 5px;
        }

        .footer-about {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            max-width: 300px;
        }

        .footer-links h5 {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            position: relative;
            display: inline-block;
        }

        .footer-links h5::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 40px;
            height: 2px;
            background: white;
        }

        .footer-links ul {
            list-style: none;
            padding: 0;
        }

        .footer-links li {
            margin-bottom: 0.8rem;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .footer-links a:hover {
            color: white;
            transform: translateX(5px);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .social-link {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            transition: var(--transition);
            text-decoration: none;
        }

        .social-link:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .hero-title {
                font-size: 2.8rem;
            }
            
            .section-title {
                font-size: 2.2rem;
            }
            
            .product-image-container {
                height: auto;
            }
        }

        @media (max-width: 768px) {
            .navbar-custom {
                padding: 0.8rem 0;
            }
            
            .hero-title {
                font-size: 2.3rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .hero-section {
                padding: 150px 0 80px;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .product-card {
                margin-bottom: 1.5rem;
            }
            
            .wizard-modal .modal-dialog {
                margin: 0.5rem;
            }
            
            .wizard-body-mobile {
                max-height: 50vh;
            }
            
            .whatsapp-float {
                bottom: 5rem;
                right: 1rem;
                width: 55px;
                height: 55px;
                font-size: 1.6rem;
            }
        }

        @media (max-width: 576px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .option-grid-mobile {
                grid-template-columns: 1fr;
            }
            
            .wizard-footer-mobile {
                flex-direction: column;
            }
            
            .mobile-order-btn {
                display: flex;
            }
            
            .whatsapp-float {
                bottom: 6rem;
            }
        }

        @media (min-width: 577px) {
            .mobile-order-btn {
                display: none;
            }
        }

        /* Rotar imágenes específicas */
        .rotate-90 {
            transform: rotate(270deg) !important;
            display: block; /* Asegura que las imágenes se comporten correctamente */
            margin: auto; /* Centra la imagen si es necesario */
        }

        /* Aplicar estilo cover a todas las imágenes */
        img {
            object-fit: cover;
        }
    </style>
</head>
<body>
    <!-- WhatsApp Flotante -->
    <a href="https://wa.me/525513581184?text=Hola%20SAYA%20Pasteles,%20me%20interesa%20hacer%20un%20pedido%20de%20la%20edición%20San%20Valentín" 
       class="whatsapp-float" target="_blank" aria-label="Contactar por WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

   

    <!-- Lightbox para imágenes -->
    <div class="lightbox" id="lightbox">
        <button class="lightbox-close" aria-label="Cerrar lightbox" onclick="closeLightbox()">
            <i class="fas fa-times"></i>
        </button>
        <img class="lightbox-img" src="" alt="">
    </div>

    <!-- WIZARD MODAL MEJORADO -->
    <div class="modal fade wizard-modal" id="orderModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="wizard-header">
                    <h4 class="modal-title text-white mb-2 text-center">Personaliza tu Pedido</h4>
                    <div class="wizard-progress-mobile">
                        <div class="progress-step-mobile active" data-step="1">
                            <div class="step-circle-mobile">1</div>
                            <span class="step-label-mobile">Producto</span>
                        </div>
                        <div class="progress-step-mobile" data-step="2">
                            <div class="step-circle-mobile">2</div>
                            <span class="step-label-mobile">Opciones</span>
                        </div>
                        <div class="progress-step-mobile" data-step="3">
                            <div class="step-circle-mobile">3</div>
                            <span class="step-label-mobile">Confirmar</span>
                        </div>
                    </div>
                </div>
                
                <div class="wizard-body-mobile">
                    <div class="wizard-step-mobile active" id="step1">
                        <div class="text-center mb-3">
                            <img src="" alt="" id="selectedProductImage" style="width: 60px; height: 60px; object-fit: cover; border-radius: 16px; margin-bottom: 1rem; border: 3px solid var(--lila-claro);">
                            <h5 id="selectedProductTitle" class="mb-1"></h5>
                            <p id="selectedProductDesc" class="text-muted small mb-2"></p>
                            <div class="product-price fs-4" id="selectedProductPrice"></div>
                        </div>
                        <div class="mt-3">
                            <label class="form-label-mobile"><i class="fas fa-hashtag"></i> Cantidad</label>
                            <div class="quantity-selector-mobile">
                                <button type="button" class="quantity-btn-mobile" onclick="changeQuantity(-1)" aria-label="Reducir cantidad">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <div class="quantity-display-mobile" id="quantityDisplay">1</div>
                                <button type="button" class="quantity-btn-mobile" onclick="changeQuantity(1)" aria-label="Aumentar cantidad">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="wizard-step-mobile" id="step2">
                        <h6 class="mb-2" id="optionsTitle"></h6>
                        <p class="text-muted mb-3 small" id="optionsSubtitle"></p>
                        <div id="sanvalentinOptions" style="display: none;">
                            <div class="mb-3">
                                <label class="form-label-mobile"><i class="fas fa-ice-cream"></i> Sabor</label>
                                <div class="option-grid-mobile" id="flavorOptions"></div>
                            </div>
                            <div>
                                <label class="form-label-mobile"><i class="fas fa-fill-drip"></i> Relleno</label>
                                <div class="option-grid-mobile" id="fillingOptions"></div>
                            </div>
                        </div>
                        <div id="tartaOptions" style="display: none;">
                            <div class="mb-3">
                                <label class="form-label-mobile"><i class="fas fa-pie-chart"></i> Tipo de tarta</label>
                                <div class="option-grid-mobile" id="tartaTypeOptions"></div>
                            </div>
                        </div>
                        <div id="cheesecakeOptions" style="display: none;">
                            <div class="alert alert-info mb-0 p-2">
                                <i class="fas fa-info-circle me-2"></i>
                                <small>Este cheesecake viene con su receta original completa.</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="wizard-step-mobile" id="step3">
                        <h6 class="mb-2">Confirma tu pedido</h6>
                        <div class="order-summary-mobile">
                            <h6 class="mb-2"><i class="fas fa-receipt"></i> Resumen</h6>
                            <div class="summary-item-mobile">
                                <span>Producto:</span>
                                <span id="summaryProduct" class="fw-bold">-</span>
                            </div>
                            <div id="summaryFlavorRow" class="summary-item-mobile" style="display: none;">
                                <span>Sabor:</span>
                                <span id="summaryFlavor">-</span>
                            </div>
                            <div id="summaryFillingRow" class="summary-item-mobile" style="display: none;">
                                <span>Relleno:</span>
                                <span id="summaryFilling">-</span>
                            </div>
                            <div id="summaryTartaTypeRow" class="summary-item-mobile" style="display: none;">
                                <span>Tipo:</span>
                                <span id="summaryTartaType">-</span>
                            </div>
                            <div class="summary-item-mobile">
                                <span>Cantidad:</span>
                                <span id="summaryQuantity">1</span>
                            </div>
                            <div class="summary-item-mobile">
                                <span>Precio extra:</span>
                                <span id="summaryExtra">$0</span>
                            </div>
                            <div class="summary-item-mobile summary-total-mobile">
                                <span>Total:</span>
                                <span id="summaryTotal">$0</span>
                            </div>
                        </div>
                        <div class="mt-3">
                            <div class="form-group-mobile">
                                <label class="form-label-mobile"><i class="fas fa-user"></i> Nombre completo</label>
                                <input type="text" class="form-input-mobile" id="customerName" placeholder="Tu nombre" required>
                            </div>
                            <div class="form-group-mobile">
                                <label class="form-label-mobile"><i class="fas fa-phone"></i> Teléfono</label>
                                <input type="tel" class="form-input-mobile" id="customerPhone" placeholder="55 1234 5678" required>
                            </div>
                            <div class="form-group-mobile">
                                <label class="form-label-mobile"><i class="fas fa-calendar-alt"></i> Fecha de entrega</label>
                                <input type="date" class="form-input-mobile" id="deliveryDate" required>
                            </div>
                            <div class="form-group-mobile">
                                <label class="form-label-mobile"><i class="fas fa-comment-alt"></i> Mensaje para etiqueta</label>
                                <textarea class="form-input-mobile" id="personalMessage" rows="2" placeholder="Escribe un mensaje especial..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="wizard-footer-mobile">
                    <button type="button" class="btn-secondary-mobile" id="prevBtn" onclick="prevStep()" style="display: none;">
                        <i class="fas fa-arrow-left"></i> Atrás
                    </button>
                    <button type="button" class="btn-primary-mobile" id="nextBtn" onclick="nextStep()">
                        Continuar <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>



    <!-- Hero Section -->
    <section class="hero-section" id="inicio">
        <div class="container">
            <div class="hero-content text-center">
                <div class="hero-logo">
                    <img src="https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_logo.jpeg" alt="SAYA Pasteles Logo">
                </div>
                <h1 class="hero-title">SAYA PASTELES</h1>
                <p class="hero-subtitle">Creaciones artesanales premium para momentos inolvidables • Edición Especial San Valentín 2026</p>
                
                <div class="hero-badge">
                    <i class="fas fa-heart" style="color: var(--rosa-corazon);"></i>
                    <span>EDICIÓN EXCLUSIVA • FECHA LÍMITE: 14 FEBRERO 2026</span>
                </div>
                
                <!-- Contador regresivo -->
             
                
                <div class="d-flex flex-column flex-md-row gap-3 justify-content-center mt-4">
                    <button class="btn btn-primary btn-lg" onclick="startOrder()" style="background: linear-gradient(135deg, var(--lila) 0%, var(--lila-oscuro) 100%); border: none; border-radius: var(--radio-full); padding: 1rem 2rem;">
                        <i class="fas fa-gift me-2"></i> Ordenar Edición Especial
                    </button>
                    <a href="#mas-vendidos" class="btn btn-outline-primary btn-lg" style="border-color: var(--lila); color: var(--lila-oscuro); border-radius: var(--radio-full); padding: 1rem 2rem;">
                        <i class="fas fa-star me-2"></i> Ver Más Vendidos
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección: Más Vendidos -->
    <section class="best-sellers-section d-none" id="mas-vendidos" style="display: none;">
        <div class="container">
            <h2 class="section-title">Los Más Pedidos</h2>
            <p class="section-subtitle">Nuestras creaciones más populares • Garantía de satisfacción</p>
            <div class="row g-4" id="best-sellers-container">
                <!-- JavaScript llenará esto -->
            </div>
        </div>
    </section>

    <!-- Sección: Productos San Valentín -->
    <section class="products-section mt-3 pt-5" id="productos-sanvalentinz">
        <div class="container">
            <h2 class="section-title">Edición Especial San Valentín</h2>
            <p class="section-subtitle">Colección exclusiva para celebrar el amor • Disponible hasta el 14 de febrero</p>
            <div class="row g-4" id="products-sanvalentin">
                <!-- JavaScript llenará esto -->
            </div>
        </div>
    </section>

    <!-- Sección: Cheesecakes -->
    <section class="best-sellers-section" id="cheesecakes">
        <div class="container">
            <h2 class="section-title">Nuestros Cheesecakes</h2>
            <p class="section-subtitle">Crema sedosa sobre base de galleta • Perfectos para cualquier ocasión</p>
            <div class="row g-4" id="products-cheesecakes">
                <!-- JavaScript llenará esto -->
                <img src="https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_CF.jpeg" alt="Imagen rotada" class="rotate-90">
            </div>
        </div>
    </section>

    <!-- Sección: Tartas y Postres -->
    <section class="products-section" id="tartas-postres">
        <div class="container">
            <h2 class="section-title">Tartas y Postres Clásicos</h2>
            <p class="section-subtitle">Delicias tradicionales con toque SAYA • Frescos y deliciosos</p>
            <div class="row g-4" id="products-tartas">
                <!-- JavaScript llenará esto -->
                <img src="https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_TM.jpeg" alt="Imagen rotada" class="rotate-90">
            </div>
        </div>
    </section>
<!-- Sección: Otros Productos -->
<section class="best-sellers-section" id="otros-productos">
    <div class="container">
        <h2 class="section-title">Otros Productos</h2>
        <p class="section-subtitle">Más delicias de nuestra pastelería artesanal</p>
        <div class="row g-4" id="products-otros">
            <!-- JavaScript llenará esto -->
        </div>
    </div>
</section>
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <div class="footer-brand">
                        <img src="https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_logo.jpeg" alt="SAYA Pasteles" class="footer-logo">
                        SAYA PASTELES
                    </div>
                    <p class="footer-about">
                        Creaciones artesanales elaboradas con ingredientes premium y dedicación para hacer tus momentos especiales inolvidables.
                    </p>
                    <div class="social-links">
                        <a href="https://instagram.com/saya_angys" class="social-link" target="_blank" aria-label="Instagram SAYA Pasteles"><i class="fab fa-instagram"></i></a>
                        <a href="https://facebook.com/saya_postres" class="social-link" target="_blank" aria-label="Facebook SAYA Pasteles"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://wa.me/525513581184" class="social-link" target="_blank" aria-label="WhatsApp SAYA Pasteles"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
                    <div class="footer-links">
                        <h5>Productos</h5>
                        <ul>
                            <li><a href="#mas-vendidos"><i class="fas fa-chevron-right"></i> Más Vendidos</a></li>
                            <li><a href="#productos-sanvalentin"><i class="fas fa-chevron-right"></i> San Valentín</a></li>
                            <li><a href="#cheesecakes"><i class="fas fa-chevron-right"></i> Cheesecakes</a></li>
                            <li><a href="#tartas-postres"><i class="fas fa-chevron-right"></i> Tartas</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 mb-4 mb-md-0">
                    <div class="footer-links">
                        <h5>Información</h5>
                        <ul>
                            <li><a href="#" onclick="startOrder()"><i class="fas fa-chevron-right"></i> Hacer Pedido</a></li>
                            <li><a href="https://wa.me/525513581184" target="_blank"><i class="fas fa-chevron-right"></i> Contactar</a></li>
                            <li><a href="#"><i class="fas fa-chevron-right"></i> Preguntas Frecuentes</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="footer-links">
                        <h5>Contacto</h5>
                        <ul>
                            <li><a href="tel:+525513581184"><i class="fas fa-phone"></i> 55 1358 1184</a></li>
                            <li><a href="#"><i class="fas fa-clock"></i> L-S: 9am - 8pm</a></li>
                            <li><a href="#"><i class="fas fa-map-marker-alt"></i> Huehuetoca y alrededores</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>© 2026 SAYA Pasteles. Edición Especial San Valentín. Todos los derechos reservados.</p>
                <p class="mt-2">Hecho con <i class="fas fa-heart" style="color: var(--rosa-corazon);"></i> para tus momentos especiales</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
    // DATOS COMPLETOS DE PRODUCTOS CON MÚLTIPLES IMÁGENES
    const productsData = {
        // PRODUCTOS SAN VALENTÍN (EXCLUSIVOS)
        'pastelitos-sanvalentin': { 
            title: "Mini Pastelitos San Valentín", 
            price: 70, 
            images: [
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_A.jpeg",
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_B.jpeg",
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_C.jpeg",
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_D.jpeg"
            ], 
            category: "sanvalentin", 
            desc: "Diámetro 9cm • Decoración premium • Etiqueta personalizada",
            bestSeller: true,
            tags: ["LIMITADO", "SAN VALENTÍN"]
        },
        'cupcakes-sanvalentin': { 
            title: "Cupcakes Premium San Valentín", 
            price: 100, 
            images: [
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_L.jpeg",
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_N.jpeg",
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_O.jpeg"
            ], 
            category: "sanvalentin", 
            desc: "Pack de 4 piezas • Personalización completa",
            bestSeller: true,
            tags: ["LIMITADO", "SAN VALENTÍN"]
        },
        'pastelito-sanvalentin-single': {
            title: "Pastelito San Valentín Individual",
            price: 80,
            images: [
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_P.jpeg",
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_Q.jpeg",
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_R.jpeg"
            ],
            category: "sanvalentin",
            desc: "Individual • Decoración especial • Mensaje personalizado",
            bestSeller: false,
            tags: ["LIMITADO"]
        },

        // CHEESECAKES REGULARES
        'cheesecake-tortuga': { 
            title: "Cheesecake Tortuga", 
            price: 420, 
            images: ["https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_CH.jpeg"], 
            category: "cheesecake", 
            desc: "Dulce de leche, chocolate, crema de avellanas y nuez",
            bestSeller: true,
            tags: ["MÁS VENDIDO"]
        },
        'cheesecake-frutosrojos': { 
            title: "Cheesecake de Frutos Rojos", 
            price: 420, 
            images: [
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_CFR.jpeg"
            ], 
            category: "cheesecake", 
            desc: "Cubierto con frutos rojos frescos • Base de galleta",
            bestSeller: false,
            tags: ["VIDEO DISPONIBLE"]
        },
        'cheesecake-ferrero': { 
            title: "Cheesecake de Ferrero", 
            price: 460, 
            images: ["https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_CF.jpeg"], 
            category: "cheesecake", 
            rotate:1,
            desc: "Avellanas, chocolate y toque de oro",
            bestSeller: false,
            tags: ["PREMIUM"]
        },

        // TARTAS Y POSTRES
        'tarta-manzanacanela': { 
            title: "Tarta de Manzana-Canela", 
            price: 290, 
            images: [
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_TM.jpeg",
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_TM2.jpeg"
            ], 
            category: "tarta", 
            rotate:1,
            desc: "Clásica tarta de manzana con canela • Masa crujiente",
            bestSeller: true,
            tags: ["CLÁSICO"]
        },
        'tartaletas-frutacrema': { 
            title: "Tartaletas de Fruta con Crema", 
            price: 290, 
            images: [
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_TMM.jpeg",
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_TMM2.jpeg"
            ], 
            category: "tarta", 
            desc: "12 docena • Fruta fresca con crema pastelera",
            bestSeller: false,
            tags: ["CLÁSICO"]
        },
        'tartaleta-individual': {
            title: "Tartaleta Individual",
            price: 25,
            images: ["https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_TMM.jpeg"],
            category: "tarta",
            desc: "1 pieza • Recoger en punto específico",
            bestSeller: false,
            tags: ["CLÁSICO"]
        },

        // OTROS PRODUCTOS
        'pan-naranja-otros': { 
            title: "Pan de Naranja Natural", 
            price: 220, 
            images: ["https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_PN.jpeg"], 
            category: "otros", 
            desc: "Naranja 100% natural • Esponjoso y aromático",
            bestSeller: false,
            rotate:1,
             tags: ["CLÁSICO"]
        },
        'cupcakes-mora-otros': { 
            title: "Cupcakes de Mora", 
            price: 110, 
            images: ["https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_CM.jpeg"], 
            category: "otros", 
            desc: "4 piezas • Con o sin relleno (+$15)",
            bestSeller: false,
            rotate:1,
             tags: ["CLÁSICO"]
        },
        'pastel-cactus-otros': { 
            title: "Pastel de Cactus", 
            price: 360, 
            images: [
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_PC1.jpeg",
                "https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_PC2.jpeg"
            ], 
            category: "otros", 
            desc: "Diámetro 28cm • Diseño único • Sabor a elegir",
            bestSeller: false,
             tags: ["CLÁSICO"]
        }
    };

    // Variables para controlar swipers
    let productSwipers = {};

    // Opciones para personalización
    const flavorOptions = [
        { name: "Chocolate", price: 0 },
        { name: "Vainilla", price: 0 },
        { name: "Choco vainilla", price: 0 },
        { name: "Fresa", price: 5 },
        { name: "Red velvet", price: 5 }
    ];

    const fillingOptions = [
        { name: "Durazno en almíbar", price: 0 },
        { name: "Nuez tostada", price: 0 },
        { name: "Dulce de leche", price: 0 },
        { name: "Chispas de chocolate", price: 0 },
        { name: "Crema de avellanas", price: 8 },
        { name: "Queso c/ zarzamora", price: 8 }
    ];

    const tartaTypes = [
        { name: "Manzana-Canela", price: 0 },
        { name: "Crema Pastelera con Frutas", price: 0 }
    ];

    // Estado del pedido
    let currentOrder = {
        product: 'pastelitos-sanvalentin',
        quantity: 1,
        flavor: { name: "Vainilla", price: 0 },
        filling: { name: "Dulce de leche", price: 0 },
        tartaType: { name: "Manzana-Canela", price: 0 }
    };

    let currentStep = 1;

    // Inicializar
    document.addEventListener('DOMContentLoaded', function() {
        loadAllProducts();
        setupCountdown();
        setupLightbox();
        setupNavigation();
        setupWizard();
        setTimeout(showWelcomeToast, 800);
    });

    // Configurar lightbox
    function setupLightbox() {
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = lightbox.querySelector('.lightbox-img');
        const closeBtn = lightbox.querySelector('.lightbox-close');
        
        lightbox.addEventListener('click', function(e) {
            if (e.target === lightbox) {
                lightbox.classList.remove('active');
            }
        });
        
        closeBtn.addEventListener('click', function() {
            lightbox.classList.remove('active');
        });
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && lightbox.classList.contains('active')) {
                lightbox.classList.remove('active');
            }
        });
    }

    // Abrir imagen en lightbox
    function openLightbox(imgSrc, alt) {
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = lightbox.querySelector('.lightbox-img');
        
        lightboxImg.src = imgSrc;
        lightboxImg.alt = alt;
        lightbox.classList.add('active');
    }

    // Configurar contador regresivo
    function setupCountdown() {
        const valentinesDay = new Date('2026-02-14T23:59:59');
        
        function updateCountdown() {
            const now = new Date();
            const diff = valentinesDay - now;
            
            if (diff <= 0) {
                document.getElementById('countdown').innerHTML = `
                    <div class="countdown-unit">
                        <div class="countdown-value">00</div>
                        <div class="countdown-label">Días</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-value">00</div>
                        <div class="countdown-label">Horas</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-value">00</div>
                        <div class="countdown-label">Min</div>
                    </div>
                `;
                return;
            }
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            document.getElementById('countdown').innerHTML = `
                <div class="countdown-unit">
                    <div class="countdown-value">${days.toString().padStart(2, '0')}</div>
                    <div class="countdown-label">Días</div>
                </div>
                <div class="countdown-unit">
                    <div class="countdown-value">${hours.toString().padStart(2, '0')}</div>
                    <div class="countdown-label">Horas</div>
                </div>
                <div class="countdown-unit">
                    <div class="countdown-value">${minutes.toString().padStart(2, '0')}</div>
                    <div class="countdown-label">Min</div>
                </div>
            `;
        }
        
        updateCountdown();
        setInterval(updateCountdown, 60000);
    }

  // Cargar todos los productos
function loadAllProducts() {
    console.log("Cargando todos los productos...");
    
    // Más vendidos (todos los que tienen bestSeller: true)
    const bestSellersContainer = document.getElementById('best-sellers-container');
    let bestSellersHTML = '';
    
    const bestSellers = Object.entries(productsData)
        .filter(([id, product]) => product.bestSeller)
        .slice(0, 4);
    
    console.log("Más vendidos encontrados:", bestSellers.length);
    
    bestSellers.forEach(([id, product]) => {
        bestSellersHTML += createProductCard(id, product, true);
    });
    
    bestSellersContainer.innerHTML = bestSellersHTML || `<div class="col-12 text-center"><p class="text-muted">No hay productos más vendidos</p></div>`;
    
    // Productos por categoría
    const categories = {
        'sanvalentin': 'products-sanvalentin',
        'cheesecake': 'products-cheesecakes',
        'tarta': 'products-tartas',
        'otros': 'products-otros'
    };
    
    console.log("Contenedores disponibles:", categories);
    
    for (const [category, containerId] of Object.entries(categories)) {
        const container = document.getElementById(containerId);
        console.log(`Procesando categoría ${category} en contenedor ${containerId}:`, container ? "Encontrado" : "No encontrado");
        
        if (!container) {
            console.warn(`Contenedor ${containerId} no encontrado en HTML`);
            continue;
        }
        
        let html = '';
        let count = 0;
        
        for (const [id, product] of Object.entries(productsData)) {
            if (product.category === category) {
                console.log(`  - Añadiendo: ${product.title} (${id})`);
                html += createProductCard(id, product, false);
                count++;
            }
        }
        
        console.log(`  Total productos en ${category}: ${count}`);
        
        if (count === 0) {
            container.innerHTML = `<div class="col-12 text-center py-5">
                <p class="text-muted">Próximamente más productos en esta categoría</p>
            </div>`;
        } else {
            container.innerHTML = html;
        }
    }
    
    // Inicializar swipers después de cargar los productos
    setTimeout(initializeSwipers, 100);
}
    // Inicializar todos los swipers
    function initializeSwipers() {
        document.querySelectorAll('.product-swiper').forEach((swiperContainer, index) => {
            const productId = swiperContainer.dataset.productId;
            const product = productsData[productId];
            
            if (product && product.images.length > 1) {
                const swiper = new Swiper(swiperContainer, {
                    slidesPerView: 1,
                    spaceBetween: 0,
                    loop: true,
                    pagination: {
                        el: swiperContainer.querySelector('.swiper-pagination'),
                        clickable: true,
                    },
                    navigation: {
                        nextEl: swiperContainer.querySelector('.swiper-button-next'),
                        prevEl: swiperContainer.querySelector('.swiper-button-prev'),
                    },
                    autoplay: {
                        delay: 3000,
                        disableOnInteraction: false,
                    },
                });
                
                productSwipers[productId] = swiper;
            }
        });
    }

    // Crear tarjeta de producto CON SWIPER
    function createProductCard(id, product, isBestSeller) {
        const badges = product.tags.map(tag => {
            const isLimited = tag === "LIMITADO";
            const isSanValentin = tag === "SAN VALENTÍN";
            const isBest = tag === "MÁS VENDIDO";
            const isVideo = tag === "VIDEO DISPONIBLE";
            
            let badgeClass = "best-seller-badge";
            let badgeStyle = "";
            
            if (isLimited) {
                badgeClass += " limited-badge";
            }
            if (isSanValentin) {
                badgeStyle = 'background: linear-gradient(135deg, var(--rosa-corazon) 0%, #ff4081 100%);';
            }
            if (isBest) {
                badgeStyle = 'background: linear-gradient(135deg, var(--dorado) 0%, #c19b3c 100%);';
            }
            if (isVideo) {
                badgeStyle = 'background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);';
            }
            
            return `<div class="${badgeClass}" style="${badgeStyle}">${tag}</div>`;
        }).join('');
        
        // Determinar si necesita swiper (más de 1 imagen)
        const hasMultipleImages = product.images && product.images.length > 1;
        const mainImage = product.images[0];
        
        let imageHTML = '';
        
        if (hasMultipleImages) {
            imageHTML = `
                <div class="product-swiper swiper" data-product-id="${id}">
                    <div class="swiper-wrapper">
                    ${product.images.map((img, index) => {
    // Verificamos si esta imagen específica debe rotar
    const debeRotar = product.rotate === (index + 1);
    const claseRotacion = debeRotar ? 'rotate-90' : '';

    return `
        <div class="swiper-slide">
            <div class="image-container" style="position: relative; overflow: hidden; height: 300px; display: flex; align-items: center; justify-content: center; background: #eee;"> 
                
                <div class="product-badges" style="position: absolute; top: 10px; left: 10px; z-index: 10;">
                    ${product.bestSeller ? '<span class="badge-overlay best-seller">★ TOP</span>' : ''}
                </div>

                <img src="${img}" 
                     alt="${product.title}" 
                     class="product-image ${claseRotacion}" 
                     onclick="openLightbox('${img}', '${product.title}', ${debeRotar})"
                     style="width: 100%; height: 100%; object-fit: contain; transition: transform 0.3s;"
                     loading="lazy">
            </div>
        </div>
    `;
}).join('')}
                    </div>
                    <!-- Controles del swiper -->
                    <div class="swiper-pagination"></div>
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                    <div class="image-counter" style="position: absolute; bottom: 10px; right: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8rem; z-index: 10;">
                        <i class="fas fa-images me-1"></i>${product.images.length}
                    </div>
                </div>
            `;
        } else {
           // Verificamos si la imagen principal (índice 1) tiene activada la rotación
const rotationClass = (product.rotate === 1) ? 'rotate-90' : '';

imageHTML = `
    <div class="product-image-container" style="overflow: hidden; position: relative;">
        <img src="${mainImage}" alt="${product.title}" 
             class="product-image ${rotationClass}" 
             onclick="openLightbox('${mainImage}', '${product.title}', ${product.rotate === 1})"
             loading="lazy"
             style="transition: transform 0.3s ease;">
        
        <div class="product-overlay">
            <button class="btn btn-light btn-sm" onclick="startOrder('${id}')">
                <i class="fas fa-shopping-cart me-1"></i> Ordenar
            </button>
        </div>
    </div>
`;
        }
        
        return `
            <div class="col-lg-3 col-md-6">
                <div class="product-card">
                    ${badges}
                    ${imageHTML}
                    <div class="product-content">
                        <h3 class="product-title">${product.title}</h3>
                        <p class="product-desc">${product.desc}</p>
                        <div class="d-flex justify-content-between align-items-center mt-3">
                            <div class="product-price">$${product.price}</div>
                            <button class="btn btn-primary btn-sm" onclick="startOrder('${id}')">
                                <i class="fas fa-shopping-cart me-1"></i> Ordenar
                            </button>
                        </div>
                        ${product.category === 'cheesecake' && id === 'cheesecake-frutosrojos' ? `
                            <div class="mt-2">
                                <a href="https://cdn.runapp.run/uploads/avatars/326xba967354609583f61cdb7e39b1789e4b_CFR.mp4" 
                                   target="_blank" 
                                   class="btn btn-outline-info btn-sm w-100">
                                    <i class="fas fa-play-circle me-1"></i> Ver video
                                </a>
                            </div>
                        ` : ''}
                    </div>
                </div>
            </div>
        `;
    }

    // Configurar wizard mejorado
    function setupWizard() {
        const valentinesDay = new Date('2026-02-14');
        const dateInput = document.getElementById('deliveryDate');
        
        const today = new Date();
        dateInput.min = today.toISOString().split('T')[0];
        
        if (valentinesDay >= today) {
            dateInput.value = valentinesDay.toISOString().split('T')[0];
        } else {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            dateInput.value = tomorrow.toISOString().split('T')[0];
        }
        
        dateInput.addEventListener('change', function() {
            const selectedDate = new Date(this.value);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            if (selectedDate < today) {
                this.value = today.toISOString().split('T')[0];
            }
        });
    }

    // Configurar navegación
    function setupNavigation() {
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-custom');
            navbar.classList.toggle('scrolled', window.scrollY > 100);
            
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link-custom');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                const sectionHeight = section.clientHeight;
                if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                    current = section.getAttribute('id');
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    }

    // Toast de bienvenida
    function showWelcomeToast() {
        showToast('🎉 ¡Bienvenido a SAYA Pasteles!', 'Edición especial San Valentín 2026 • ¡Haz tu pedido ahora!', 'success');
    }

    // Mostrar toast
    function showToast(title, message, type = 'info') {
        let container = document.getElementById('toast-container');
        if (!container) {
            container = document.createElement('div');
            container.id = 'toast-container';
            container.style.cssText = 'position: fixed; top: 20px; right: 20px; z-index: 9999; max-width: 350px;';
            document.body.appendChild(container);
        }
        
        const toast = document.createElement('div');
        toast.className = 'toast';
        toast.style.cssText = 'background: white; border-radius: var(--radio-xl); padding: 1rem; box-shadow: var(--sombra-intensa); border-left: 4px solid var(--lila); margin-bottom: 1rem; animation: slideIn 0.3s ease; display: flex; align-items: center; gap: 1rem;';
        
        const icons = {
            success: 'check-circle',
            error: 'exclamation-circle',
            info: 'info-circle'
        };
        
        toast.innerHTML = `
            <div class="toast-icon" style="width: 35px; height: 35px; border-radius: 50%; background: var(--lila-fondo); display: flex; align-items: center; justify-content: center; color: var(--lila);">
                <i class="fas fa-${icons[type] || 'info-circle'}"></i>
            </div>
            <div style="flex: 1;">
                <div style="font-weight: 600; color: var(--lila-oscuro); margin-bottom: 0.2rem;">${title}</div>
                <div style="font-size: 0.9rem; color: var(--texto-claro);">${message}</div>
            </div>
            <button onclick="this.parentElement.remove()" style="background: none; border: none; color: var(--texto-claro); cursor: pointer; opacity: 0.5; transition: opacity 0.2s;">
                <i class="fas fa-times"></i>
            </button>
        `;
        
        container.appendChild(toast);
        
        setTimeout(() => {
            if (toast.parentElement) {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }
        }, 5000);
    }

    // Iniciar pedido
    function startOrder(productId = null) {
        if (productId && productsData[productId]) {
            currentOrder.product = productId;
        }
        
        const product = productsData[currentOrder.product];
        if (product.category === 'sanvalentin') {
            currentOrder.flavor = { name: "Vainilla", price: 0 };
            currentOrder.filling = { name: "Dulce de leche", price: 0 };
        } else if (product.category === 'tarta') {
            currentOrder.tartaType = { name: "Manzana-Canela", price: 0 };
        }
        
        updateSelectedProductDisplay();
        loadOptionsForCategory();
        currentStep = 1;
        showStep(1);
        updateOrderSummary();
        
        const modal = new bootstrap.Modal(document.getElementById('orderModal'));
        modal.show();
    }

    // Actualizar display del producto en wizard
    function updateSelectedProductDisplay() {
        const product = productsData[currentOrder.product];
        if (!product) return;
        
        document.getElementById('selectedProductImage').src = product.images[0];
        document.getElementById('selectedProductTitle').textContent = product.title;
        document.getElementById('selectedProductDesc').textContent = product.desc;
        document.getElementById('selectedProductPrice').textContent = `$${product.price}`;
    }

    // Cargar opciones según categoría
    function loadOptionsForCategory() {
        const product = productsData[currentOrder.product];
        if (!product) return;
        
        ['sanvalentinOptions', 'tartaOptions', 'cheesecakeOptions'].forEach(id => {
            document.getElementById(id).style.display = 'none';
        });
        
        const titles = {
            sanvalentin: { 
                title: 'Personaliza tu pedido San Valentín', 
                subtitle: 'Elige sabor y relleno para tu producto' 
            },
            tarta: { 
                title: 'Selecciona el tipo de tarta', 
                subtitle: 'Elige la variedad que prefieres' 
            },
            cheesecake: { 
                title: '¡Tu cheesecake está listo!', 
                subtitle: 'Receta original incluida' 
            },
            otros: {
                title: 'Productos especiales',
                subtitle: 'Configura tu pedido'
            }
        };
        
        const category = product.category;
        document.getElementById('optionsTitle').textContent = titles[category]?.title || 'Personaliza tu pedido';
        document.getElementById('optionsSubtitle').textContent = titles[category]?.subtitle || 'Elige las opciones';
        
        if (category === 'sanvalentin') {
            document.getElementById('sanvalentinOptions').style.display = 'block';
            loadOptions('flavorOptions', flavorOptions, 'flavor');
            loadOptions('fillingOptions', fillingOptions, 'filling');
        } else if (category === 'tarta') {
            document.getElementById('tartaOptions').style.display = 'block';
            loadOptions('tartaTypeOptions', tartaTypes, 'tartaType');
        } else if (category === 'cheesecake') {
            document.getElementById('cheesecakeOptions').style.display = 'block';
        } else {
            // Para otros productos, mostrar mensaje simple
            document.getElementById('cheesecakeOptions').style.display = 'block';
            document.getElementById('cheesecakeOptions').innerHTML = `
                <div class="alert alert-info mb-0 p-2">
                    <i class="fas fa-info-circle me-2"></i>
                    <small>Este producto viene listo para disfrutar. Si necesitas personalización especial, contáctanos.</small>
                </div>
            `;
        }
    }
    function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    if (lightbox) {
        lightbox.classList.remove('active');
    }
}


    // Cargar opciones en grid
    function loadOptions(containerId, options, type) {
        const container = document.getElementById(containerId);
        container.innerHTML = '';
        
        options.forEach(option => {
            const isSelected = currentOrder[type].name === option.name;
            const card = document.createElement('div');
            card.className = `option-card-mobile ${isSelected ? 'selected' : ''}`;
            card.dataset[type] = option.name;
            card.dataset.price = option.price;
            
            card.innerHTML = `
                <div class="fw-bold small mb-1">${option.name}</div>
                ${option.price > 0 ? `<div class="option-price-mobile">+ $${option.price}</div>` : '<div class="text-success small">Incluido</div>'}
            `;
            
            card.addEventListener('click', function() {
                container.querySelectorAll('.option-card-mobile').forEach(c => {
                    c.classList.remove('selected');
                });
                
                this.classList.add('selected');
                currentOrder[type] = { 
                    name: this.dataset[type], 
                    price: parseInt(this.dataset.price) || 0 
                };
                
                updateOrderSummary();
            });
            
            container.appendChild(card);
        });
    }

    // Mostrar paso actual
    function showStep(step) {
        currentStep = step;
        
        document.querySelectorAll('.wizard-step-mobile').forEach(stepEl => {
            stepEl.classList.remove('active');
        });
        
        document.getElementById(`step${step}`).classList.add('active');
        
        document.querySelectorAll('.progress-step-mobile').forEach(stepEl => {
            stepEl.classList.remove('active', 'completed');
            const stepNum = parseInt(stepEl.dataset.step);
            if (stepNum < step) stepEl.classList.add('completed');
            if (stepNum === step) stepEl.classList.add('active');
        });
        
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        
        prevBtn.style.display = step === 1 ? 'none' : 'flex';
        
        if (step === 3) {
            nextBtn.innerHTML = 'Enviar pedido <i class="fab fa-whatsapp"></i>';
            nextBtn.onclick = submitOrder;
        } else {
            nextBtn.innerHTML = 'Continuar <i class="fas fa-arrow-right"></i>';
            nextBtn.onclick = nextStep;
        }
        
        if (step === 2) {
            loadOptionsForCategory();
        }
        if (step === 3) {
            updateOrderSummary();
        }
    }

    // Cambiar cantidad
    function changeQuantity(amount) {
        currentOrder.quantity = Math.max(1, Math.min(50, currentOrder.quantity + amount));
        document.getElementById('quantityDisplay').textContent = currentOrder.quantity;
        updateOrderSummary();
    }

    // Actualizar resumen del pedido
    function updateOrderSummary() {
        const product = productsData[currentOrder.product];
        if (!product) return;
        
        let extraPrice = 0;
        
        const rows = ['summaryFlavorRow', 'summaryFillingRow', 'summaryTartaTypeRow'];
        rows.forEach(row => document.getElementById(row).style.display = 'none');
        
        if (product.category === 'sanvalentin') {
            document.getElementById('summaryFlavorRow').style.display = 'flex';
            document.getElementById('summaryFillingRow').style.display = 'flex';
            document.getElementById('summaryFlavor').textContent = currentOrder.flavor.name;
            document.getElementById('summaryFilling').textContent = currentOrder.filling.name;
            extraPrice = currentOrder.flavor.price + currentOrder.filling.price;
        } else if (product.category === 'tarta') {
            document.getElementById('summaryTartaTypeRow').style.display = 'flex';
            document.getElementById('summaryTartaType').textContent = currentOrder.tartaType.name;
            extraPrice = currentOrder.tartaType.price;
        }
        
        const total = (product.price + extraPrice) * currentOrder.quantity;
        
        document.getElementById('summaryProduct').textContent = product.title;
        document.getElementById('summaryQuantity').textContent = currentOrder.quantity;
        document.getElementById('summaryExtra').textContent = `$${extraPrice}`;
        document.getElementById('summaryTotal').textContent = `$${total}`;
    }

    // Siguiente paso
    function nextStep() {
        if (currentStep === 2) {
            const product = productsData[currentOrder.product];
            
            if (product.category === 'sanvalentin') {
                if (!currentOrder.flavor || !currentOrder.filling) {
                    showToast('Completa las opciones', 'Por favor selecciona sabor y relleno', 'error');
                    return;
                }
            }
            
            if (product.category === 'tarta' && !currentOrder.tartaType) {
                showToast('Selecciona el tipo', 'Por favor elige el tipo de tarta', 'error');
                return;
            }
        }
        
        if (currentStep < 3) {
            showStep(currentStep + 1);
        }
    }

    // Paso anterior
    function prevStep() {
        if (currentStep > 1) {
            showStep(currentStep - 1);
        }
    }

    // Enviar pedido
    function submitOrder() {
        const name = document.getElementById('customerName').value.trim();
        const phone = document.getElementById('customerPhone').value.trim();
        const deliveryDate = document.getElementById('deliveryDate').value;
        
        if (!name) {
            showToast('Falta tu nombre', 'Por favor ingresa tu nombre completo', 'error');
            document.getElementById('customerName').focus();
            return;
        }
        
        if (!phone || phone.replace(/\D/g, '').length < 10) {
            showToast('Teléfono inválido', 'Ingresa un número de teléfono válido de 10 dígitos', 'error');
            document.getElementById('customerPhone').focus();
            return;
        }
        
        if (!deliveryDate) {
            showToast('Selecciona fecha', 'Por favor elige una fecha de entrega', 'error');
            document.getElementById('deliveryDate').focus();
            return;
        }
        
        sendWhatsAppOrder();
    }
// REEMPLAZA TODA LA FUNCIÓN sendWhatsAppOrder() con este código:
function sendWhatsAppOrder() {
    const product = productsData[currentOrder.product];
    let extraPrice = 0;
    
    let message = `🍰 *NUEVO PEDIDO - SAYA PASTELES* 🍰\n\n`;
    message += `*PRODUCTO:* ${product.title}\n`;
    message += `*PRECIO BASE:* $${product.price}\n`;
    message += `*CANTIDAD:* ${currentOrder.quantity}\n`;
    
    if (product.category === 'sanvalentin') {
        extraPrice = currentOrder.flavor.price + currentOrder.filling.price;
        message += `*SABOR:* ${currentOrder.flavor.name} ${currentOrder.flavor.price > 0 ? `(+$${currentOrder.flavor.price})` : ''}\n`;
        message += `*RELLENO:* ${currentOrder.filling.name} ${currentOrder.filling.price > 0 ? `(+$${currentOrder.filling.price})` : ''}\n`;
    } else if (product.category === 'tarta') {
        message += `*TIPO:* ${currentOrder.tartaType.name}\n`;
    }
    
    const total = (product.price + extraPrice) * currentOrder.quantity;
    message += `*TOTAL:* $${total}\n\n`;
    
    message += `*DATOS DEL CLIENTE:*\n`;
    message += `• Nombre: ${document.getElementById('customerName').value}\n`;
    message += `• Teléfono: ${document.getElementById('customerPhone').value}\n`;
    message += `• Fecha de entrega: ${document.getElementById('deliveryDate').value}\n`;
    
    const personalMessage = document.getElementById('personalMessage').value.trim();
    if (personalMessage) {
        message += `\n*MENSAJE PARA ETIQUETA:*\n"${personalMessage}"\n\n`;
    }
    
    message += `---\n`;
    message += `📍 *Entrega en Huehuetoca y alrededores*\n`;
    message += `⏰ *Tiempo de preparación: 24-48 horas*\n\n`;
    message += `¿Podrían confirmar disponibilidad y detalles para completar el pedido?`;
    
    // LLAMAR A LA FUNCIÓN ESPECIAL PARA iOS
    openWhatsAppDirect(message);
}

// AGREGA ESTA NUEVA FUNCIÓN DESPUÉS DE sendWhatsAppOrder():
function openWhatsAppDirect(messageText) {
    const phone = "525513581184";
    const encodedMessage = encodeURIComponent(messageText);
    
    // Para iOS necesitamos una estrategia especial
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
    
    if (isIOS) {
        // Método 1: Intentar abrir app nativa
        const nativeURL = `whatsapp://send?phone=${phone}&text=${encodedMessage}`;
        const webURL = `https://api.whatsapp.com/send?phone=${phone}&text=${encodedMessage}`;
        
        // Crear iframe temporal (truco para iOS)
        const iframe = document.createElement('iframe');
        iframe.style.cssText = 'display:none !important;';
        iframe.src = nativeURL;
        document.body.appendChild(iframe);
        
        // Si no se abre WhatsApp en 1 segundo, abrir versión web
        setTimeout(() => {
            document.body.removeChild(iframe);
            
            // Abrir en nueva pestaña
            const newTab = window.open(webURL, '_blank');
            
            // Si bloquea popup, usar location
            if (!newTab || newTab.closed || typeof newTab.closed == 'undefined') {
                window.location.href = webURL;
            }
        }, 1000);
        
    } else {
        // Para Android y otros navegadores
        window.open(
            `https://api.whatsapp.com/send?phone=${phone}&text=${encodedMessage}`,
            '_blank'
        );
    }
    
    // Cerrar modal inmediatamente (no esperar)
    const modal = bootstrap.Modal.getInstance(document.getElementById('orderModal'));
    if (modal) modal.hide();
    
    // Resetear formulario
    resetOrderForm();
}

// Función para resetear el formulario
function resetOrderForm() {
    currentOrder.quantity = 1;
    document.getElementById('quantityDisplay').textContent = '1';
    document.getElementById('customerName').value = '';
    document.getElementById('customerPhone').value = '';
    document.getElementById('personalMessage').value = '';
    
    const product = productsData[currentOrder.product];
    if (product.category === 'sanvalentin') {
        currentOrder.flavor = { name: "Vainilla", price: 0 };
        currentOrder.filling = { name: "Dulce de leche", price: 0 };
    }
}
  
</script>
</body>
</html>
